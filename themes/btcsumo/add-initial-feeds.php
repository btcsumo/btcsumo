<?php

$feeds_list = [
  [
    'title'    => 'Cryptocoins News',
    'site_url' => 'https://www.cryptocoinsnews.com',
    'feed_url' => 'https://www.cryptocoinsnews.com/category/news/feed',
    'twitter'  => 'CryptoCoinsNews'
  ],
  [
    'title'    => 'CoinDesk',
    'site_url' => 'http://coindesk.com',
    'feed_url' => 'http://feeds.feedburner.com/CoinDesk',
    'twitter'  => 'coindesk'
  ],
  [
    'title'    => 'Follow The Coin',
    'site_url' => 'http://www.followthecoin.com',
    'feed_url' => 'http://www.followthecoin.com/feed/atom',
    'twitter'  => 'FollowTheCoin'
  ],
  [
    'title'    => 'Coin Telegraph',
    'site_url' => 'http://cointelegraph.com',
    'feed_url' => 'http://cointelegraph.com/rss',
    'twitter'  => 'CoinTelegraph'
  ],
  [
    'title'    => 'Bitcoin Magazine',
    'site_url' => 'https://bitcoinmagazine.com',
    'feed_url' => 'http://feeds.feedburner.com/BitcoinMagazine',
    'twitter'  => 'BitcoinMagazine'
  ],
  [
    'title'    => 'Tyra CPA',
    'site_url' => 'https://www.tyracpa.com',
    'feed_url' => 'https://www.tyracpa.com/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Bitcoin Chaser',
    'site_url' => 'http://bitcoinchaser.com',
    'feed_url' => 'http://bitcoinchaser.com/feed',
    'twitter'  => 'BitcoinChaser'
  ],
  [
    'title'    => 'Bitcoinist',
    'site_url' => 'http://bitcoinist.net',
    'feed_url' => 'http://bitcoinist.net/feed',
    'twitter'  => 'bitcoinist'
  ],
  [
    'title'    => 'Bitcoin Warrior',
    'site_url' => 'http://bitcoinwarrior.net',
    'feed_url' => 'http://bitcoinwarrior.net/feed',
    'twitter'  => 'BitCoin_Win'
  ],
  [
    'title'    => 'CEX.IO',
    'site_url' => 'http://blog.cex.io',
    'feed_url' => 'http://blog.cex.io/feed',
    'twitter'  => 'cex_io'
  ],
  [
    'title'    => 'Coins Source',
    'site_url' => 'http://www.coinssource.com',
    'feed_url' => 'http://www.coinssource.com/rss',
    'twitter'  => 'coinssource'
  ],
  [
    'title'    => 'Altcoin Speculation',
    'site_url' => 'http://altcoinspeculation.com',
    'feed_url' => 'http://altcoinspeculation.com/feed',
    'twitter'  => 'altcoinspec'
  ],
  [
    'title'    => 'CoinFinance',
    'site_url' => 'http://www.coinfinance.com',
    'feed_url' => 'http://feeds.feedburner.com/CoinFinance',
    'twitter'  => 'coinfinance_com'
  ],
  [
    'title'    => 'Bitcoin Outpost',
    'site_url' => 'http://bitcoinoutpost.com',
    'feed_url' => 'http://bitcoinoutpost.com/?feed=podcast',
    'twitter'  => false
  ],
  [
    'title'    => 'Bitcoin Feeds',
    'site_url' => 'http://bitcoinfeeds.com',
    'feed_url' => 'http://bitcoinfeeds.com/feed',
    'twitter'  => 'BitcoinFeeds'
  ],
  [
    'title'    => 'The Blogchain',
    'site_url' => 'http://theblogchain.com',
    'feed_url' => 'http://theblogchain.com/feed',
    'twitter'  => 'BenIsgur'
  ],
  [
    'title'    => 'Cryptocoin Talk',
    'site_url' => 'https://cryptocointalk.com',
    'feed_url' => 'https://cryptocointalk.com/rss/blog',
    'twitter'  => false
  ],
  [
    'title'    => 'Altcoin Fever',
    'site_url' => 'http://www.altcoinfever.com',
    'feed_url' => 'http://www.altcoinfever.com/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Brave New Coin',
    'site_url' => 'http://bravenewcoin.com',
    'feed_url' => 'http://bravenewcoin.com/news/rss',
    'twitter'  => 'bravenewcoin'
  ],
  [
    'title'    => 'Crypto Mining Blog',
    'site_url' => 'http://cryptomining-blog.com',
    'feed_url' => 'http://cryptomining-blog.com/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Inside Bitcoins',
    'site_url' => 'http://insidebitcoins.com',
    'feed_url' => 'http://insidebitcoins.com/feed',
    'twitter'  => 'InsideBitcoins'
  ],
  [
    'title'    => 'Live Bitcoin News',
    'site_url' => 'http://www.livebitcoinnews.com',
    'feed_url' => 'http://www.livebitcoinnews.com/feed',
    'twitter'  => 'LiveBitcoinNews'
  ],
  [
    'title'    => 'Coin Center',
    'site_url' => 'https://coincenter.org',
    'feed_url' => 'https://coincenter.org/category/blog/feed',
    'twitter'  => 'coincenter'
  ],
  [
    'title'    => 'Best Bitcoin Wallet',
    'site_url' => 'http://bestbitcoinwallet.info',
    'feed_url' => 'http://bestbitcoinwallet.info/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Bitcoin Beginner',
    'site_url' => 'http://blog.bitcoinbeginner.com',
    'feed_url' => 'http://blog.bitcoinbeginner.com/rss',
    'twitter'  => false
  ],
  [
    'title'    => 'Bitcoin Money',
    'site_url' => 'http://bitcoinmoney.com',
    'feed_url' => 'http://bitcoinmoney.com/rss',
    'twitter'  => false
  ],
  [
    'title'    => 'Signal Strength Finance',
    'site_url' => 'https://signalstrengthfinance.wordpress.com',
    'feed_url' => 'https://signalstrengthfinance.wordpress.com/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Suitpossum',
    'site_url' => 'http://suitpossum.blogspot.co.uk/m',
    'feed_url' => 'http://feeds.feedburner.com/SuitpossumFragmentsOfFinancialSubversion',
    'twitter'  => false
  ],
  [
    'title'    => 'BTC Trading',
    'site_url' => 'https://btctrading.wordpress.com',
    'feed_url' => 'https://btctrading.wordpress.com/feed',
    'twitter'  => 'Bitcoin_Trading'
  ],
  [
    'title'    => 'Bitcoin Blog',
    'site_url' => 'http://www.bitcoinblog.me',
    'feed_url' => 'http://www.bitcoinblog.me/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'Digital Money Times',
    'site_url' => 'http://digitalmoneytimes.com',
    'feed_url' => 'http://digitalmoneytimes.com/feed',
    'twitter'  => false
  ],
  [
    'title'    => 'CoinBuzz',
    'site_url' => 'http://www.coinbuzz.com',
    'feed_url' => 'http://www.coinbuzz.com/feed',
    'twitter'  => 'coinbuzz'
  ],
  [
    'title'    => 'Coin Report',
    'site_url' => 'https://coinreport.net',
    'feed_url' => 'https://coinreport.net/feed',
    'twitter'  => 'CoinReportNews'
  ],
  [
    'title'    => 'Bitcoin Scientist',
    'site_url' => 'http://bitcoinscientist.com',
    'feed_url' => 'http://feeds.feedburner.com/BitcoinScientist',
    'twitter'  => false
  ],
  [
    'title'    => 'BitCoinada',
    'site_url' => 'http://bitcoinada.com',
    'feed_url' => 'http://bitcoinada.com/feed',
    'twitter'  => 'bitcoinada'
  ],
  [
    'title'    => 'Bitcoin Weekly',
    'site_url' => 'http://bitcoinweekly.com',
    'feed_url' => 'http://bitcoinweekly.com/rss/10cj1e7m',
    'twitter'  => false
  ],
  [
    'title'    => 'Bitcoin Reporter',
    'site_url' => 'http://bitcoinreporter.com',
    'feed_url' => 'http://bitcoinreporter.com/?format=feed&type=rss',
    'twitter'  => false
  ],
  [
    'title'    => 'All Coins News',
    'site_url' => 'http://allcoinsnews.com',
    'feed_url' => 'http://allcoinsnews.com/feed',
    'twitter'  => 'allcoinsnews'
  ],
  [
    'title'    => 'Mining Pool',
    'site_url' => 'http://www.miningpool.co.uk',
    'feed_url' => 'http://www.miningpool.co.uk/feed',
    'twitter'  => 'mining_pool'
  ],
  [
    'title'    => 'CoinFox',
    'site_url' => 'http://www.coinfox.info',
    'feed_url' => 'http://www.coinfox.info/rss',
    'twitter'  => 'coin_fox'
  ]
];

require $_SERVER['DOCUMENT_ROOT'] . '/wp/wp-load.php';

$inserted_items = [];
$skipped_items = [];
$failed_items = [];

foreach ( $feeds_list as $feed ) {
  $feed = (object) $feed;

  // Check if the current feed already exists.
  if ( $post = get_page_by_title( $feed->title, OBJECT, 'feeds' ) ) {
    $skipped_items[ $post->ID ] = $feed->title;
    continue;
  }

  // Create post object.
  $post = [
    'post_title'  => $feed->title,
    'post_type'   => 'feeds',
    'post_status' => 'publish',
    'post_author' => 1
  ];

  // If the feed got added successfully, add the meta data too.
  if ( $post_id = wp_insert_post( $post, false ) ) {
    add_post_meta( $post_id, 'feed-active', count( $inserted_items ) < 7 );
    add_post_meta( $post_id, 'feed-site-url', esc_url_raw( $feed->site_url ) );
    add_post_meta( $post_id, 'feed-feed-url', esc_url_raw( $feed->feed_url ) );
    add_post_meta( $post_id, 'feed-twitter-username', $feed->twitter );
    $inserted_items[ $post_id ] = $feed->title;
  } else {
    $failed_items[] = $feed->title;
  }
}

wp_die( sprintf( 'Inserted Items: %d<br>Skipped Items: %d<br>Failed Items: %d<br><br><a href="%s">Home</a>', count( $inserted_items ), count( $skipped_items ), count( $failed_items ), home_url() ) );
